<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PP AUTOS - Cat치logo Vehicular</title>

    <style>
        /* Variables para el esquema de color ne칩n azul */
        :root {
            --color-dark-bg: #111;
            --color-neon-blue: #D7DEDF; 
            --color-light-text: #fff;
            --color-sub-text: #aaa;
            /* Sombra de ne칩n AZUL */
            --shadow-neon: 0 0 5px var(--color-neon-blue), 0 0 10px var(--color-neon-blue), 0 0 20px rgba(0, 191, 255, 0.4);
            --color-value-neon: #D0D1C8; /* Ne칩n gris/griss para el valor */
            --shadow-value: 0 0 8px var(--color-value-neon);
            
            /* 游눠 Variables Neumorfismo Oscuro Adaptado */
            --neu-dark-shadow: #0a0a0a; /* Sombra oscura para profundidad (Darker than #111) */
            --neu-light-shadow:#313236; /* Sombra clara para brillo (Lighter than #111) */
            --neu-base-color: rgba(17, 17, 17, 0.95); /* Color base (Igual al header) */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            /* Fuente optimizada para sistemas operativos modernos */
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; 
        }

        body {
            background-color: var(--color-dark-bg); /* Fondo de respaldo negro oscuro */
            color: var(--color-light-text);
            min-height: 100vh; 
            display: flex; 
            flex-direction: column;
        }
        
        /* C칍DIGO PARA VIDEO DE FONDO */
        #background-video {
            position: fixed; 
            top: 50%; /* CENTRADO VERTICAL */
            left: 50%; /* CENTRADO HORIZONTAL */
            /* El siguiente transform asegura el centrado perfecto */
            transform: translate(-50%, -50%); 
            
            /* CR칈TICO: Aseguramos que cubra todo y mantenga la proporci칩n */
            min-width: 80%; 
            min-height: 100%; 
            width: auto; /* Ancho autom치tico para no distorsionar */
            height: auto; /* Alto autom치tico para no distorsionar */
            
            object-fit: cover; 
            z-index: -100; 
            opacity: 1; 
            display: none; 
        }
        
        /* Clase para mostrar el video de fondo S칍LO en el men칰 */
        .menu-active-video #background-video {
            display: block; 
        }

        .app-container {
            flex-grow: 1; 
            background-color: transparent; 
            padding-bottom: 50px; /* Espacio para el footer fijo */
        }
              
        /* Bot칩n de Regreso FIJO */
        .fixed-back-button {
            position: fixed;
            top: 15px; /* Posici칩n desde arriba */
            left: 15px; /* Posici칩n desde la izquierda */
            z-index: 2000; /* Asegura que est칠 por encima de todo */
            
            background-color: var(--neu-base-color);
            border: none;
            color: var(--color-neon-blue);
            padding: 10px 20px; 
            cursor: pointer;
            border-radius: 999px; 
            font-weight: bold;
            font-size: 1.2em;
            transition: all 0.4s ease-in-out;
            
            /* Aplicaci칩n de Neumorfismo Oscuro Inset */
            box-shadow: inset 4px 4px 8px var(--neu-dark-shadow), 
                        inset -4px -4px 8px var(--neu-light-shadow); 
            
            /* Sombra de texto ne칩n */
            text-shadow: 0 0 5px rgba(0, 191, 255, 0.5);
        }
        
        .fixed-back-button:hover {
            /* Efecto de 'despresurizaci칩n' (outset) y resplandor ne칩n */
            background-color: var(--neu-base-color);
            box-shadow: 4px 4px 8px var(--neu-dark-shadow),
                        -4px -4px 8px var(--neu-light-shadow),
                        var(--shadow-neon); /* Agrega el resplandor ne칩n exterior */
            color: var(--color-light-text);
        }

        /* --- P츼GINA 1: MEN칔 --- */
        #page-menu {
            padding: 20px 20px 20px; 
            min-height: auto; 
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center; 
        }
        
        /* Contenedor para el t칤tulo del men칰 */
        .menu-title-wrapper {
            width: 100%;
            max-width: 350px; 
            text-align: center;
            margin: 0 20px 20px 0; 
        }
        
        /* C칍DIGO ACTUALIZADO PARA EL FADE-IN del T칈TULO (8s Suave) */
        .menu-title-wrapper.fade-in-initial-hidden {
            opacity: 0;
            transition: opacity 8s ease-in; 
        }
        .menu-title-wrapper.fade-in-visible {
            opacity: 1;
        }
        /* FIN C칍DIGO T칈TULO */


        /* T칤tulo h1 */
        .menu-title-wrapper h1 {
            font-size: 2em;
            color: var(--color-neon-blue);
            text-shadow: var(--shadow-neon); 
            white-space: nowrap;
        }

        /* C칍DIGO MODIFICADO PARA EL FADE-IN STAGGER (Entrada desde el Fondo con Escala) */
        
        /* Definimos la animaci칩n para el efecto de "Aparecer y Escalar" */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.5); /* Empieza a la mitad del tama침o (Saliendo del fondo) */
            }
            to {
                opacity: 1;
                transform: scale(1); /* Termina en su posici칩n normal */
            }
        }

        /* Clase inicial para ocultar y preparar los botones */
        .category-menu-container.buttons-stagger-hidden .feature-button {
            opacity: 0;
            transform: scale(0.5); /* La posici칩n inicial coincide con el keyframe 'from' */
            /* Asegura que no haya transici칩n antes de la activaci칩n */
            transition: none; 
        }

        /* Clase para activar la animaci칩n escalonada */
        .category-menu-container.buttons-stagger-active .feature-button {
            /* Aplicamos la nueva animaci칩n fadeInScale */
            animation: fadeInScale 0.5s ease-out forwards;
            /* La opacidad inicial debe ser 0 para que la animaci칩n funcione */
            opacity: 0; 
        }

        /* Reglas para el retraso escalonado (Stagger): 0.1s de diferencia por bot칩n */
        .buttons-stagger-active .feature-button:nth-child(1) { animation-delay: 0.1s; }
        .buttons-stagger-active .feature-button:nth-child(2) { animation-delay: 0.2s; }
        .buttons-stagger-active .feature-button:nth-child(3) { animation-delay: 0.3s; }
        .buttons-stagger-active .feature-button:nth-child(4) { animation-delay: 0.4s; }
        .buttons-stagger-active .feature-button:nth-child(5) { animation-delay: 0.5s; }
        .buttons-stagger-active .feature-button:nth-child(6) { animation-delay: 0.6s; }
        .buttons-stagger-active .feature-button:nth-child(7) { animation-delay: 0.7s; }
        .buttons-stagger-active .feature-button:nth-child(8) { animation-delay: 0.8s; }
        .buttons-stagger-active .feature-button:nth-child(9) { animation-delay: 0.9s; }
        
        /* FIN C칍DIGO MODIFICADO */


        /* CONTENEDOR DE BOTONES */
        .category-menu-container {
            width: 100%;
            max-width: 300px; 
            padding: 0 0 60px 0; 
            border-radius: 20px; 
            text-align: left;
            margin: 0 0 60px -40px; 
            background-color: transparent; 
            border: none; 
            box-shadow: none; 
        }

        /* 游눠 Contenedor de los botones a 3 columnas con CSS Grid */
        .features-menu {
            display: grid; 
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        /* BOTONES */
        .feature-button {
            background: transparent; 
            border: 1px solid var(--color-light-text); 
            color: var(--color-light-text); 
            padding: 5px 5px; 
            text-align: center; 
            cursor: pointer;
            transition: all 0.5s;
            border-radius: 999px; 
            font-size: 1em; 
            font-weight: bold;
        }
        
        .feature-button:hover {
            /* Efecto Ne칩n al pasar el cursor */
            background-color: rgba(0, 191, 255, 0.1); 
            border-color: var(--color-neon-blue); 
            box-shadow: var(--shadow-neon); 
            color: var(--color-neon-blue); 
        }

        /* --- P츼GINA 2: CAT츼LOGO DE TARJETAS --- */
        #page-catalog {
            display: none; 
            padding: 20px 15px; 
            min-height: calc(100vh - 50px);
        }

        .category-title {
            color: var(--color-neon-blue);
            text-shadow: var(--shadow-neon);
            margin: 20px 0;
            font-size: 2.5em;
            text-align: center;
        }

        /* LAYOUT DE COLUMNAS (Responsive) */
        #catalogo-vehiculos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 20px;
            padding: 10px 0;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* ESTILOS DE TARJETA */
        .car-card {
            background-color: rgba(26, 26, 26, 0.95); 
            border: 1px solid #333;
            border-radius: 15px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.3s, box-shadow 0.3s;
            min-height: auto; 
            position: relative; 
        }

        .car-card:hover {
            transform: translateY(-5px);
            border-color: var(--color-neon-blue);
            box-shadow: var(--shadow-neon);
        }

        /* ESTILOS PARA LA IMAGEN */
        .card-image-container {
            width: 100%;
            display: flex;
            justify-content: center; 
            align-items: center;
            margin-bottom: 15px; 
            border-radius: 12px;
            overflow: hidden; 
        }

        .card-image {
            width: 100%;
            height: auto;
	    max-height: 250px;
            display: block; 
            object-fit: cover; 
            border-radius: 12px;
            box-shadow: 0 0 5px var(--color-neon-blue);
        }

        /* RESTO DE ESTILOS DE DETALLE */
        .card-detail p {
            margin: 5px 0;
            font-size: 0.9em;
            color: var(--color-sub-text);
text-align: center;
        }

        .card-detail strong {
            color: var(--color-light-text);
            font-weight: normal;
        }

        /* 游눠 ESTILO BASE: Contenedor para el SVG y el texto del detalle */
        .motor-detail-container, 
        .year-detail-container, 
        .transmission-detail-container,
        .mileage-detail-container {
            display: grid;
grid-template-columns: 30px 1fr;
            align-items: center;
            gap: 15px; /* Espacio entre el SVG y el texto */
            margin: 5px 0;
            font-size: 0.9em;
            color: var(--color-sub-text);
        }
        
        /* Estilos espec칤ficos para el texto del detalle */
       .detail-text-line {
    display: flex;
    align-items: center;
    /* CORRECCI칍N CR칈TICA: Forzamos la alineaci칩n del texto a la izquierda. */
    text-align: left; 
    /* CR칈TICO: Aseguramos que el contenido dentro del flex comience desde el inicio */
    justify-content: flex-start;
        }
        
        /* 游 ESTILOS DEL MOTOR SVG ANIMADO */
        
        /* 1. ANIMACI칍N DE ROTACI칍N (Eje) - Se mantiene */
        @keyframes giro-eje {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* 2. ANIMACIONES DE MOVIMIENTO SUPERIOR (Variadas) */
        @keyframes colector-mov1 {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-0.8px); }
            100% { transform: translateY(0px); }
        }

        @keyframes colector-mov2 {
            0% { transform: translateY(0px); }
            40% { transform: translateY(-0.4px); }
            80% { transform: translateY(-0.8px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes colector-mov3 {
            0% { transform: translateY(0px); }
            70% { transform: translateY(-0.6px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes colector-mov4 {
            0% { transform: translateY(0px); }
            60% { transform: translateY(-0.7px); }
            100% { transform: translateY(0px); }
        }

        /* Aplicaci칩n de animaciones */
        .eje-giratorio {
            transform-origin: 22px 10px;
            animation: giro-eje 1s infinite linear;
        }

        /* Aplicaci칩n individual a cada l칤nea */
        .movimiento-1 { animation: colector-mov1 0.25s infinite alternate ease-in-out; }
        .movimiento-2 { animation: colector-mov2 0.3s infinite alternate ease-in-out; }
        .movimiento-3 { animation: colector-mov3 0.2s infinite alternate ease-in-out; }
        .movimiento-4 { animation: colector-mov4 0.35s infinite alternate ease-in-out; }
        
        /* Ajuste del tama침o del SVG para la tarjeta */
        .motor-icon {
            width: 25px; 
            height: 15px; 
            margin-right: 5px; /* Espacio antes del texto del detalle */
            stroke: var(--color-light-text); /* Color base: Blanco */
            transition: stroke 0.3s ease;
        }
        .car-card:hover .motor-icon {
            stroke: var(--color-neon-blue);
        }
        
        /* FIN DE ESTILOS DEL MOTOR SVG ANIMADO */
        
        /* 游늰 ESTILOS NUEVOS: ICONO DE A칌O SVG */
        
        /* Clase reutilizada para el nuevo SVG de A침o */
        .year-icon { 
            width: 20px; 
            height: 20px;
            flex-shrink: 0;
            stroke: var(--color-light-text); 
            stroke-width: 2; 
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: stroke 0.3s ease, transform 0.3s;
            animation: none; 
        }
        
        .car-card:hover .year-icon {
            stroke: var(--color-neon-blue); /* Efecto Ne칩n al pasar el mouse */
            transform: scale(1.1); 
        }

        /* NUEVO: Estilos y Animaci칩n para los 6 Cuadros */
        .animated-square {
            /* CR칈TICO: Usamos 'currentColor' para que tome el color de 'stroke' (blanco/ne칩n) */
            fill: currentColor; 
            stroke: none; /* Sin borde de l칤nea */
            opacity: 0.8;
            /* Aplicar la animaci칩n de movimiento con duraci칩n y alternancia */
            animation: square-move 1.5s infinite alternate ease-in-out; 
        }

        /* Definir el retraso escalonado para el movimiento de los 6 cuadros */
        #moving-squares .animated-square:nth-child(1) { animation-delay: 0s; }
        #moving-squares .animated-square:nth-child(2) { animation-delay: 0.2s; }
        #moving-squares .animated-square:nth-child(3) { animation-delay: 0.4s; }
        #moving-squares .animated-square:nth-child(4) { animation-delay: 0.1s; } 
        #moving-squares .animated-square:nth-child(5) { animation-delay: 0.3s; }
        #moving-squares .animated-square:nth-child(6) { animation-delay: 0.5s; }

        /* Nueva Animaci칩n: Movimiento vertical sutil para los cuadros */
        @keyframes square-move {
            0% { transform: translateY(0); opacity: 1; }
            50% { transform: translateY(-3px); opacity: 0.8; } /* Mueve 3px hacia arriba */
            100% { transform: translateY(0); opacity: 1; }
        }
        /* FIN DE ESTILOS DEL ICONO DE A칌O SVG */
        
        /* 丘뙖잺 ESTILOS: ICONO DE TRANSMISI칍N */

        /* Definir la animaci칩n de rotaci칩n para los engranajes */
        @keyframes gear-spin {
            to {
                transform: rotate(360deg);
            }
        }

        .transmission-icon {
            width: 20px; 
            height: 20px; 
            flex-shrink: 0;
            stroke: var(--color-light-text); /* Asegura que el color base sea blanco */
            stroke-width: 1.5;
            fill: none;
            transition: stroke 0.3s ease;
        }

        /* Aplicaci칩n de la animaci칩n a los grupos de engranajes */
        .gear-large {
            transform-origin: 16.5px 16.5px; /* Origen: Centro del engranaje inferior derecho (16.5, 16.5) */
            animation: gear-spin 3s linear infinite;
        }

        .gear-small {
            transform-origin: 9.5px 9px; /* Origen: Centro del engranaje superior (9.5, 9) */
            /* Rotaci칩n m치s r치pida en sentido contrario para contraste */
            animation: gear-spin 2s linear infinite reverse; 
        }

        /* Efecto al pasar el mouse */
        .car-card:hover .transmission-icon path,
        .car-card:hover .transmission-icon circle {
            stroke: var(--color-neon-blue); 
        }
        /* FIN ESTILOS TRANSMISI칍N */

        
        /* 游 VELOC칈METRO SVG ANIMADO (KILOMETRAJE) */
        .mileage-detail-container { /* Nuevo nombre para el contenedor de kilometraje */
            display: flex;
            align-items: center;
            gap: 25px; 
            margin: 5px 0; 
            font-size: 0.9em;
            color: var(--color-sub-text);
        }

        .speedometer-icon { /* Reutilizamos la clase para el elemento SVG */
            width: 20px; 
            height: 20px; 
            flex-shrink: 0;
            /* Estilos de l칤nea blanca sin fondo */
            stroke: var(--color-light-text); /* Base color: White */
            stroke-width: 1.5;
            fill: none; /* Sin fondo */
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: stroke 0.3s ease;
        }

        /* Definimos la animaci칩n de la aguja (efecto de barrido) */
        @keyframes speedo-sweep-v2 {
            0% { transform: rotate(-80deg); } /* Inicio (Izquierda) */
            50% { transform: rotate(45deg); }  /* Fin (Derecha) */
            100% { transform: rotate(-80deg); }
        }

        /* Aplicaci칩n de la animaci칩n a la aguja */
        .speedo-aguja {
            /* El origen de la rotaci칩n es el centro (12, 16) del SVG */
            transform-origin: 12px 16px;
            animation: speedo-sweep-v2 2s infinite alternate ease-in-out;
        }

        /* Efecto al pasar el mouse por la tarjeta entera */
        .car-card:hover .speedometer-icon path,
        .car-card:hover .speedometer-icon line,
        .car-card:hover .speedometer-icon circle {
            stroke: var(--color-neon-blue); /* Cambia a ne칩n azul al pasar el rat칩n */
        }
        /* FIN DE ESTILOS DEL VELOC칈METRO SVG ANIMADO */
        
        .card-value {
            margin-top: 15px;
            padding: 10px;
            text-align: center; 
            font-size: 1.6em;
            font-weight: bold;
            color: var(--color-value-neon); 
            text-shadow: var(--shadow-value);
            border-top: 1px solid #333;
            margin-bottom: 15px; 
        }
        
        /* ESTILOS DEL BOT칍N DE WHATSAPP */
        .modern-btn-whatsapp { 
            width: 100%;
            height: 3em;
            border-radius: 30em;
            font-size: 15px;
            font-family: inherit;
            border: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
            cursor: pointer;
            text-decoration: none; 
            display: flex; 
            align-items: center;
            justify-content: center;
            color: #E5E5E5; 
            font-weight: bold;
            
            background: var(--neu-base-color);
            box-shadow: 4px 4px 8px var(--neu-dark-shadow),
                        -4px -4px 8px var(--neu-light-shadow);
            transition: all 0.2s ease;
        }

        .modern-btn-whatsapp::before {
            content: '';
            width: 0;
            height: 100%;
            border-radius: 30em;
            position: absolute;
            top: 0;
            left: 0;
            /* Fondo gradiente de WhatsApp */
            background-image: linear-gradient(to right, #075E54, #25D366); 
            transition: width 0.5s ease;
            z-index: -1;
        }

        .modern-btn-whatsapp:hover::before {
            width: 100%;
        }

        .modern-btn-whatsapp:hover {
            color: #fff;
            transform: scale(1.03);
        }
        
        .whatsapp-icon {
            font-size: 1.2em;
            margin-right: 8px;
            filter: drop-shadow(0 0 2px #25D366); 
        }

        /* --- P츼GINA 3: DETALLES DEL VEH칈CULO --- */
        #page-details {
            display: none; 
            padding: 20px 15px; 
            max-width: 1000px;
            margin: 0 auto;
        }

        .detail-header {
            text-align: center;
            margin: 20px 0 30px; 
        }

        .detail-header h2 {
            font-size: 2.5em;
            color: var(--color-neon-blue);
            text-shadow: var(--shadow-neon);
            margin-bottom: 10px;
        }

        .detail-header .detail-value {
            font-size: 2em;
            color: var(--color-value-neon);
            text-shadow: var(--shadow-value);
            margin-top: 10px;
            padding: 10px 0;
            border-top: 1px solid #333;
            display: block;
        }
        
       /* Layout de la Galer칤a mejorado */
.image-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
    gap: 15px;
    margin-bottom: 30px;
}

/* Estilo para im치genes de galer칤a uniformes */
.gallery-image {
    width: 100%;
    height: 250px; /* Altura fija para todas las fotos */
    display: block; 
    object-fit: cover; /* Mantiene la proporci칩n recortando lo sobrante */
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0, 191, 255, 0.2);
    transition: transform 0.3s;
}

.gallery-image:hover {
    transform: scale(1.02);
    box-shadow: var(--shadow-neon);
}
        /* FOOTER */
        .app-footer {
            padding: 10px;
            background-color: rgba(17, 17, 17, 0.95);
            color: var(--color-sub-text);
            text-align: center;
            font-size: 0.8em;
            width: 100%;
            position: fixed; 
            bottom: 0;
            left: 0;
            z-index: 1000;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </head>
<body>
    
    <video muted playsinline id="background-video">
        <source id="video-source" src="https://github.com/dannysantiag-droid/VIDEO-DE-ENTRADA/raw/refs/heads/main/video%20fondo%20APP.mp4" type="video/mp4">
        Tu navegador no soporta el video de fondo.
    </video>
    
    <div class="app-container">
        
        <main id="page-menu">
            
            <div class="menu-title-wrapper fade-in-initial-hidden" id="menu-title-wrapper">
                <h1>CAT츼LOGO VEHICULAR</h1>
            </div>

            <section class="category-menu-container buttons-stagger-hidden" id="menu-buttons-container">
                <div class="features-menu" id="category-buttons">
                    
                    
                    <button class="feature-button" data-category="SUV">SUV</button>
		            
                    
                    <button class="feature-button" data-category="H칤bridos">H칤bridos</button>
		    <button class="feature-button" data-category="Camiones">Camiones</button>
		            
			        


                </div>            
            </section>
        </main>

        <main id="page-catalog">
            <h1 class="category-title" id="main-category-title"></h1>
            <section id="catalogo-vehiculos">
                </section>
        </main>

        <main id="page-details" style="display: none;">
            <div class="detail-header">
                <h2 id="detail-title"></h2>
                <span class="detail-value" id="detail-value"></span>
            </div>

            <div class="image-gallery" id="gallery-container">
                </div>
            
            </main>

    </div>

    <button class="fixed-back-button" id="fixed-btn-back" onclick="showPage('previous')" style="display: none;">
        <i class="fas fa-arrow-left"></i>
    </button>

    <footer class="app-footer">
        <span>춸 2024 PP AUTOS - El Auto de Tus Sue침os</span>
    </footer>

    <script>
        // --- 1. ESTRUCTURA DE DATOS DE LOS VEH칈CULOS (JSON) ---
        
        const placeholderImg = (text) => `https://via.placeholder.com/250x250/222233/00bfff?text=${text.replace(' ', '+')}`;
        const placeholderGallery = (model) => {
            const baseText = model.toUpperCase().replace(' ', '+');
            return [
                placeholderImg(`${baseText}+Frente`),
                placeholderImg(`${baseText}+Interior`),
                placeholderImg(`${baseText}+Lateral`),
                placeholderImg(`${baseText}+Motor`),
                placeholderImg(`${baseText}+Trasera`),
                placeholderImg(`${baseText}+Detalle`)
            ];
        };

        // Utilidad para obtener una URL de imagen para el cat치logo 
        const getCatalogImg = (vehiculo) => vehiculo.ImagenURL || (vehiculo.ImagenesGaleria && vehiculo.ImagenesGaleria[0]) || placeholderImg(vehiculo.Modelo);

        /* CONFIGURACI칍N DE WHATSAPP */
        const WHATSAPP_NUMBER = '593968139608'; 

        // Funci칩n para generar el enlace de WhatsApp
        function getWhatsappLink(marca, modelo) {
            const text = encodeURIComponent(`Hola, estoy interesado/a en el veh칤culo ${marca} ${modelo} que vi en el cat치logo de PP AUTOS. 쯇odr칤an darme m치s informaci칩n?`);
            // Usa 'wa.me' para una mejor compatibilidad m칩vil y web
            return `https://wa.me/${WHATSAPP_NUMBER}?text=${text}`;
        }

        // Funci칩n que inserta el SVG del motor (peque침o y animado)
        function getMotorSVG() {
            return `
                <svg class="motor-icon" viewBox="0 0 24 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="5" width="20" height="9" rx="1" stroke="currentColor" stroke-width="1"/>
                    <path d="M4 14L4 15C4 15.5523 4.44772 16 5 16H19C19.5523 16 20 15.5523 20 15L20 14" stroke="currentColor" stroke-width="1"/>
                    <rect x="3" y="3" width="18" height="2" rx="0.5" stroke="currentColor" stroke-width="1"/>
                    
                    <g class="movimiento-1">
                        <path d="M6 3V1" stroke="currentColor" stroke-width="1"/>
                    </g>
                    
                    <g class="movimiento-2">
                        <path d="M10 3V1" stroke="currentColor" stroke-width="1"/>
                    </g>
                    
                    <g class="movimiento-3">
                        <path d="M14 3V1" stroke="currentColor" stroke-width="1"/>
                    </g>
                    
                    <g class="movimiento-4">
                        <path d="M18 3V1" stroke="currentColor" stroke-width="1"/>
                    </g>

                    <path d="M5 14V8M9 14V8M13 14V8M17 14V8" stroke="currentColor" stroke-width="0.5"/>
                    
                    <path d="M2 10H0.5" stroke="currentColor" stroke-width="1"/>
                    <circle cx="0.5" cy="10" r="1.5" stroke="currentColor" stroke-width="1" fill="none"/>

                    <g class="eje-giratorio">
                        <circle cx="22" cy="10" r="2" stroke="currentColor" stroke-width="1" fill="none"/>
                        <path d="M20 10H24" stroke="currentColor" stroke-width="1"/>
                        <path d="M22 8.5V11.5" stroke="currentColor" stroke-width="0.5" stroke-linecap="round"/>
                    </g>
                </svg>
            `;
        }
        
        // 游늰 FUNCI칍N MODIFICADA: Retorna un SVG de ICONO DE A칌O (con 6 cuadros animados)
        function getYearIconSVG() {
            return `
                <svg class="year-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="4" width="18" height="17" rx="2" ry="2"/>
                    <path d="M3 9H21" />
                    <line x1="16" y1="2" x2="16" y2="6" />
                    <line x1="8" y1="2" x2="8" y2="6" />
                    
                    <g id="moving-squares" transform="translate(0, 5)">
                        <rect class="animated-square" x="5" y="6" width="4" height="4" rx="1"/>
                        <rect class="animated-square" x="10" y="6" width="4" height="4" rx="1"/>
                        <rect class="animated-square" x="15" y="6" width="4" height="4" rx="1"/>

                        <rect class="animated-square" x="5" y="11" width="4" height="4" rx="1"/>
                        <rect class="animated-square" x="10" y="11" width="4" height="4" rx="1"/>
                        <rect class="animated-square" x="15" y="11" width="4" height="4" rx="1"/>
                    </g>
                </svg>
            `;
        }
        
        // 丘뙖잺 FUNCI칍N DE TRANSMISI칍N (Caja de Cambios) - CON ANIMACI칍N DE ENGRANAJES
        function getTransmissionIconSVG() {
            return `
                <svg class="transmission-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    
                    <g class="gear-small">
                        <circle cx="9.5" cy="9" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                        <line x1="9.5" y1="6.5" x2="9.5" y2="5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <line x1="7" y1="9" x2="5.5" y2="9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </g>

                    <g class="gear-large">
                        <circle cx="16.5" cy="16.5" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                        <line x1="16.5" y1="14" x2="16.5" y2="12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <line x1="19" y1="16.5" x2="20.5" y2="16.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </g>
                    
                    <circle cx="7.5" cy="16.5" r="2.5" stroke="currentColor" stroke-width="1.5"/>

                    <path d="M9.5 9L7.5 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16.5 14L19 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M7 16.5H16.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            `;
        }

        // 游 SVG de Veloc칤metro Animado (Kilometraje)
        function getSpeedometerSVG() {
            return `
                <svg class="speedometer-icon" viewBox="0 0 24 24">
                    <path class="icon-element" d="M4 16A10 10 0 1 1 20 16" />
                    <circle class="icon-element" cx="12" cy="16" r="1.5" />
                    <line class="speedo-aguja icon-element" x1="12" y1="16" x2="12" y2="6" />
                    <line class="icon-element" x1="4" y1="16.5" x2="5" y2="16.5" />
                    <line class="icon-element" x1="19" y1="16.5" x2="20" y2="16.5" />
                </svg>
            `;
        }
        // FIN CAMBIO NUEVO

        // Se ha agregado la propiedad 'ImagenesGaleria' a cada veh칤culo
        const catalogo = {
            "Sed치n": [
                { 
                    id: 1, 
                    Marca: "CITROEN", 
                    Modelo: "C-ELYSEE", 
                    A침o: 2019, 
                    Motor: "1.6", 
                    Transmisi칩n: "Manual", 
                    Kilometraje: "130,000 km", 
                    Valor: "$12,900", 
                    ImagenURL: "https://i.ibb.co/b4kQNMY/6.jpg", 
				    ImagenesGaleria: [
			            "https://i.ibb.co/GQPQLvN8/3.jpg", 
                        "https://i.ibb.co/C5QbkyrB/4.jpg",
                        "https://i.ibb.co/ktyrWHv/7.jpg",
                        "https://i.ibb.co/N6tgZWYf/1.jpg",
                        "https://i.ibb.co/N2v2MrjQ/2.jpg",
                        "https://i.ibb.co/vx7t30ZP/5.jpg"
]
},
                
            ],
             
            
            "SUV": [
                { id: 1, Marca: "JEEP", Modelo: "WRANGLER", A침o: 2011, Motor: "3.8", Transmisi칩n: "Autom치tica", Kilometraje: "102,000 km", Valor: "$45,900", 
ImagenURL: "https://i.ibb.co/1fFDFRFd/IMG-20251016-WA0095.jpg",
 ImagenesGaleria: [ "https://i.ibb.co/qMVns2P9/IMG-20251016-WA0082.jpg", "https://i.ibb.co/b5qJ9GX7/IMG-20251016-WA0083.jpg", "https://i.ibb.co/QsRJ083/IMG-20251016-WA0088.jpg", "https://i.ibb.co/1fFDFRFd/IMG-20251016-WA0095.jpg", "https://i.ibb.co/99ywMSjW/IMG-20251016-WA0085.jpg", "https://i.ibb.co/G3P3K7YD/IMG-20251016-WA0089.jpg" ] },

                { id: 2, Marca: "HYUNDAI",
 Modelo: "SANTA FE",
 A침o: 2010, Motor: "2.4", 
Transmisi칩n: "Autom치tico",
 Kilometraje: "257,000 km", Valor: "$12,900", 
ImagenURL: "https://i.ibb.co/rKRmH50w/1.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/9kTfv3LM/2.jpg", 
                        "https://i.ibb.co/Z6nn74bC/3.jpg",
                        "https://i.ibb.co/NdJkSvg7/4.jpg",
                        "https://i.ibb.co/tM1q7s29/5.jpg",
                        "https://i.ibb.co/MkFkqpnK/6.jpg",
                        "https://i.ibb.co/ksFT2cCw/7.jpg"
]
 },


                { id: 3, Marca: "TOYOTA", 
Modelo: "RUSH",
 A침o: 2021, Motor: "1.5", 
Transmisi칩n: "Autom치tica", Kilometraje: "71,000 km", Valor: "$19,990", 
ImagenURL: "https://i.ibb.co/6JtnCkNV/1.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/SwJx2Zn2/2.jpg", 
                        "https://i.ibb.co/35KJzcNR/3.jpg",
                        "https://i.ibb.co/wFCQZXjT/4.jpg",
                        "https://i.ibb.co/WNWbshr2/5.jpg",
                        "https://i.ibb.co/YFbVSj3Z/6.jpg",
                        "https://i.ibb.co/5hVMkDPh/7.jpg"
]
 },


                { id: 4, Marca: "BMW",
 Modelo: "X5",
 A침o: 2007, Motor: "3.0", Transmisi칩n: "Autom치tica", Kilometraje: "193,000 km", Valor: "$14,000",
ImagenURL: "https://i.ibb.co/mVssFBcq/Whats-App-Image-2026-01-26-at-09-23-23.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/20PRcFVj/Whats-App-Image-2026-01-26-at-09-23-22.jpg", 
                        "https://i.ibb.co/YFfq9N5v/Whats-App-Image-2026-01-26-at-09-23-23-1.jpg",
                        "https://i.ibb.co/KpYGCjDC/Whats-App-Image-2026-01-26-at-09-23-23-4.jpg",
                        "https://i.ibb.co/3mZnVZ0N/Whats-App-Image-2026-01-26-at-09-23-24-4.jpg",
                        "https://i.ibb.co/1tWRMGY6/Whats-App-Image-2026-01-26-at-09-23-24-6.jpg",
                        "https://i.ibb.co/xKjY4fbg/Whats-App-Image-2026-01-26-at-09-23-23-6.jpg"
]
 },


                { id: 5, Marca: "CHANGAN",
 Modelo: "CS35 PLUS",
 A침o: 2023,Motor: "1.6", Transmisi칩n: "Manual", Kilometraje: "62,000 km", Valor: "$16,900", 
ImagenURL: "https://i.ibb.co/RpJVrVPp/2.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/W4TSdvg7/1.jpg", 
                        "https://i.ibb.co/GQ1FRd8y/3.jpg",
                        "https://i.ibb.co/MDQTW4m2/4.jpg",
                        "https://i.ibb.co/v4fkF7VD/5.jpg",
                        "https://i.ibb.co/ycz6rzK7/6.jpg",
                        "https://i.ibb.co/3yhVMjwD/7.jpg"
]
 },



                { id: 6, Marca: "CHEVROLET",
 Modelo: "GROOVE",
 A침o: 2023, Motor: "1.5", Transmisi칩n: "Manual", Kilometraje: "89,000 km", Valor: "$16,900", 
ImagenURL: "https://i.ibb.co/gMnFTgQX/1.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/RGyHRZSD/2.jpg", 
                        "https://i.ibb.co/LzWZ9gq8/3.jpg",
                        "https://i.ibb.co/JWXQgh5H/4.jpg",
                        "https://i.ibb.co/1YY5bycd/5.jpg",
                        "https://i.ibb.co/Xf7pd8bc/6.jpg",
                        "https://i.ibb.co/cXgdv4xG/7.jpg"
]
 },

 { id: 10, Marca: "HYUNDAI",
 Modelo: "SANTA FE",
 A침o: 2019, Motor: "2.4", Transmisi칩n: "Manual", Kilometraje: "105,000 km", Valor: "$25,900", 
ImagenURL: "https://i.ibb.co/7xscWVP8/Whats-App-Image-2026-01-29-at-15-18-04.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/PZc2BWnn/Whats-App-Image-2026-01-29-at-15-18-04-2.jpg", 
                        "https://i.ibb.co/zHNkqQyQ/Whats-App-Image-2026-01-29-at-15-18-05-2.jpg",
                        "https://i.ibb.co/TBGVNgx2/Whats-App-Image-2026-01-29-at-15-18-04-5.jpg",
                        "https://i.ibb.co/tPPW5b9s/Whats-App-Image-2026-01-29-at-15-18-04-4.jpg",
                        "https://i.ibb.co/qYr3pg4m/Whats-App-Image-2026-01-29-at-15-18-03.jpg",
                        "https://i.ibb.co/WWnBBcGf/Whats-App-Image-2026-01-29-at-15-18-05.jpg"
]
 },

{ id: 11, Marca: "KIA",
 Modelo: "CARENS LX",
 A침o: 2023, Motor: "1.5", Transmisi칩n: "Manual", Kilometraje: "52,000 km", Valor: "$22,900", 
ImagenURL: "https://i.ibb.co/rKqfdFw1/Whats-App-Image-2026-01-29-at-13-25-12.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/WvBSGLZ9/Whats-App-Image-2026-01-29-at-13-25-13-1.jpg", 
                        "https://i.ibb.co/Tq2t4HTW/Whats-App-Image-2026-01-29-at-13-25-13-2.jpg",
                        "https://i.ibb.co/LXMqKwDM/Whats-App-Image-2026-01-29-at-13-25-13.jpg",
                        "https://i.ibb.co/pvcnVG4y/Whats-App-Image-2026-01-29-at-13-25-14-1.jpg",
                        "https://i.ibb.co/SqSR87c/Whats-App-Image-2026-01-29-at-13-25-13-5.jpg",
                        "https://i.ibb.co/TMWy17t0/Whats-App-Image-2026-01-29-at-13-25-13-4.jpg"
]
 },

 { id: 12, Marca: "NISSAN",
 Modelo: "KICKS ADVANCE",
 A침o: 2023,Motor: "1.6", Transmisi칩n: "Autom치tica", Kilometraje: "110,000 km", Valor: "$17,900", 
ImagenURL: "https://i.ibb.co/1tWD6QKY/1.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/v4f8BGgb/2.jpg", 
                        "https://i.ibb.co/wr6gWwrM/7.jpg",
                        "https://i.ibb.co/Mk9zFSmq/6.jpg",
                        "https://i.ibb.co/gLF6LP7y/4.jpg",
                        "https://i.ibb.co/gMFvy7nw/9.jpg",
                        "https://i.ibb.co/hxqQxy7j/10.jpg"
]
 },


                { id: 7, Marca: "VOLKSWAGEN",
 Modelo: "TIGUAN TRENDLINE",
 A침o: 2018, Motor: "2.0", Transmisi칩n: "Autom치tica", Kilometraje: "119,000 km", Valor: "$21,900",
ImagenURL: "https://i.ibb.co/vvR601sB/1.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/nf2gQ2G/2.jpg", 
                        "https://i.ibb.co/5gjvtf2q/3.jpg",
                        "https://i.ibb.co/VpSTBbDP/4.jpg",
                        "https://i.ibb.co/0Ryjv4WQ/5.jpg",
                        "https://i.ibb.co/LhxFW3M8/7.jpg",
                        "https://i.ibb.co/v4BJg14Y/8.jpg"
]
 },
               

                { id: 9, Marca: "KIA",
 Modelo: "SPORTAGE R LS",
 A침o: 2017, Motor: "2.0L", Transmisi칩n: "Autom치tica",
Kilometraje: "145,000 Km",
 Valor: "$18,000", 
ImagenURL: "https://i.ibb.co/0pNVvPMD/2.jpg",
ImagenesGaleria: [
			"https://i.ibb.co/CK5J5xBx/1.jpg", 
                        "https://i.ibb.co/rKP6pY4M/12.jpg",
                        "https://i.ibb.co/PzfQG5k4/10.jpg",
                        "https://i.ibb.co/hJfpwBH8/4.jpg",
                        "https://i.ibb.co/rG31TCBj/7.jpg",
                        "https://i.ibb.co/DPq85g30/11.jpg"
]
 },

               
            ],
            "Camionetas": [
                { id: 1, Marca: "FORD", Modelo: "F150 RC", A침o: 2011, Motor: "3.7", Transmisi칩n: "Autom치tica"
, Kilometraje: "198,000 km", Valor: "$13,500", 
ImagenURL: "https://i.ibb.co/n8CypjdH/1.jpg"
, ImagenesGaleria: [
			"https://i.ibb.co/dwx8M9n2/2.jpg", 
                        "https://i.ibb.co/4ZsKPwbM/3.jpg",
                        "https://i.ibb.co/pjJ8QJjk/4.jpg",
                        "https://i.ibb.co/fzBHSZ0P/5.jpg",
                        "https://i.ibb.co/mVB65PL9/6.jpg",
                        "https://i.ibb.co/67CwXz02/7.jpg"
]
 },

                { id: 2, Marca: "JAC", Modelo: "T6 LUXURY",
 A침o: 2019, Motor: "2.0", Transmisi칩n: "Manual", Kilometraje: "159,000 km", Valor: "$15,900",
 ImagenURL: "https://i.ibb.co/ch3KcP4n/1.jpg"
, ImagenesGaleria: [
			"https://i.ibb.co/k6sK8nhK/2.jpg", 
                        "https://i.ibb.co/gbhxyY6g/6.jpg",
                        "https://i.ibb.co/GfvYqjkd/3.jpg",
                        "https://i.ibb.co/nMSPJWcs/7.jpg",
                        "https://i.ibb.co/Hp2TsNf3/8.jpg",
                        "https://i.ibb.co/xtX9ngTB/9.jpg"
]
 },

               
            ],
            
            "H칤bridos": [                
		{ id: 2, Marca: "KIA",
 Modelo: "NIRO HYBRID",
 A침o: 2019, Motor: "1.6L H칤brido", 
Transmisi칩n: "Autom치tica", Kilometraje: "102,000 km",
Valor: "$18,900", 
ImagenURL: "https://i.ibb.co/7FcqfPZ/1.jpg"
, ImagenesGaleria: [
			"https://i.ibb.co/M3g1B93/2.jpg", 
                        "https://i.ibb.co/zTNDQKWQ/3.jpg",
                        "https://i.ibb.co/RGBc3dDg/4.jpg",
                        "https://i.ibb.co/27ZrpRyv/5.jpg",
                        "https://i.ibb.co/KcsMNC7V/6.jpg",
                        "https://i.ibb.co/hRL171vr/7.jpg"
]
 },
		{ id: 2, Marca: "TOYOTA",
 Modelo: "PRIUS C SPORT",
 A침o: 2020, Motor: "1.5L H칤brido", 
Transmisi칩n: "Autom치tica", Kilometraje: "97,000 km",
Valor: "$17,900", 
ImagenURL: "https://i.ibb.co/XZcdKqy1/1.jpg"
, ImagenesGaleria: [
			"https://i.ibb.co/zTW0hJhc/2.jpg", 
                        "https://i.ibb.co/9HnvLYN6/3.jpg",
                        "https://i.ibb.co/7dKpfgzc/4.jpg",
                        "https://i.ibb.co/4ZcyyZYr/5.jpg",
                        "https://i.ibb.co/7JzPjZsf/7.jpg",
                        "https://i.ibb.co/Kc4PXj4b/6.jpg"
]
 },



                { id: 3, Marca: "CHERY",
Modelo: "TIGGO 4 PRO LUXURY",
 A침o: 2024, Motor: "1.5L H칤brido", Transmisi칩n: "Autom치tica", Kilometraje: "65,000 km", Valor: "$16,900", 
ImagenURL: "https://i.ibb.co/wZjkBq0S/1.jpg"
, ImagenesGaleria: [
			"https://i.ibb.co/pjSqj4f5/2.jpg", 
                        "https://i.ibb.co/8nSrDV38/3.jpg",
                        "https://i.ibb.co/ZpXW73Lj/4.jpg",
                        "https://i.ibb.co/Ld9nfmbP/5.jpg",
                        "https://i.ibb.co/cXXSGhkn/6.jpg",
                        "https://i.ibb.co/svpStJMC/7.jpg"
]
 }
],

		"Camiones": [
    { 
        id: 1, 
        Marca: "JMC", 
        Modelo: "CARRYING", 
        A침o: 2026, 
        Motor: "2.8",
	Carga: "2.8 Toneladas", 
        Transmisi칩n: "Manual", 
        Kilometraje: "0,0 km", 
        Valor: "$16,990", 
        ImagenURL: "https://i.ibb.co/v57jGSL/Whats-App-Image-2026-01-26-at-17-42-09.jpg", 
        ImagenesGaleria: [
			"https://i.ibb.co/kgVgzjH9/Whats-App-Image-2026-01-26-at-17-42-09-3.jpg", 
                        "https://i.ibb.co/p68PfqcM/Whats-App-Image-2026-01-26-at-17-42-09-1.jpg",
                        "https://i.ibb.co/d4qJ642B/Whats-App-Image-2026-01-26-at-17-42-10-5.jpg",
                        "https://i.ibb.co/fzQftrdD/Whats-App-Image-2026-01-26-at-17-42-10-3.jpg",
                        "https://i.ibb.co/p6pbmH7R/Whats-App-Image-2026-01-26-at-17-42-09-2.jpg",
                        "https://i.ibb.co/prJFzYc2/Whats-App-Image-2026-01-26-at-17-42-10.jpg"
]

    },
    
]
          
            
        };


        // --- 2. L칍GICA DE NAVEGACI칍N Y RENDERIZADO ---

        const pageMenu = document.getElementById('page-menu');
        const pageCatalog = document.getElementById('page-catalog');
        const pageDetails = document.getElementById('page-details');
        const mainCategoryTitle = document.getElementById('main-category-title');
        const catalogoVehiculosDiv = document.getElementById('catalogo-vehiculos');
        const fixedBtnBack = document.getElementById('fixed-btn-back');
        const categoryButtonsContainer = document.getElementById('menu-buttons-container');
        const menuTitleWrapper = document.getElementById('menu-title-wrapper');
        const backgroundVideo = document.getElementById('background-video'); // <-- Variable del video
        
        let history = ['menu']; 
        let currentCategory = null; 

        /**
         * Maneja el cambio de p치gina y actualiza el historial de navegaci칩n.
         * @param {string} page - La p치gina a mostrar ('menu', 'catalog', 'details', 'previous').
         * @param {string} category - Categor칤a del cat치logo (solo si page='catalog' o 'details').
         * @param {number} vehicleId - ID del veh칤culo (solo si page='details').
         */
        function showPage(page, category = null, vehicleId = null) {
            // Ocultar todas las p치ginas
            pageMenu.style.display = 'none';
            pageCatalog.style.display = 'none';
            pageDetails.style.display = 'none';
            document.body.classList.remove('menu-active-video');
            fixedBtnBack.style.display = 'none';
            
            // Pausar el video para ahorrar recursos si no est치 en el men칰
            if (backgroundVideo) {
                backgroundVideo.pause();
            }

            let targetPage = page;

            if (page === 'previous') {
                // Eliminar la p치gina actual del historial
                history.pop();
                if (history.length === 0) {
                    // Si el historial est치 vac칤o, volver al men칰 por defecto
                    history.push('menu');
                }
                
                // La p치gina anterior es la 칰ltima en el historial
                const previousEntry = history[history.length - 1];
                
                // Manejo de variables al regresar
                if (previousEntry.startsWith('catalog:')) {
                    category = previousEntry.split(':')[1];
                    targetPage = 'catalog';
                } else if (previousEntry.startsWith('details:')) {
                    const parts = previousEntry.split(':')[1].split(':');
                    category = parts[0];
                    vehicleId = parseInt(parts[1]);
                    targetPage = 'details';
                } else {
                    targetPage = 'menu';
                }

            } else {
                // Si no es "previous", a침adir al historial la nueva p치gina/estado
                let historyEntry;
                if (page === 'catalog') {
                    historyEntry = `catalog:${category}`;
                } else if (page === 'details') {
                    // CR칈TICO: Usamos la categor칤a recibida como par치metro, no la global, para ser m치s robustos.
                    const usedCategory = category || currentCategory; 
                    historyEntry = `details:${usedCategory}:${vehicleId}`; 
                    category = usedCategory; // Aseguramos que la variable local 'category' tenga el valor correcto para el rendering.
                } else {
                    historyEntry = 'menu';
                }

                // Evitar duplicados si ya es la p치gina actual
                if (history[history.length - 1] !== historyEntry) {
                    history.push(historyEntry);
                }
            }

            // Eliminar entradas duplicadas si ocurre un error de navegaci칩n
            if (history.length > 2 && history[history.length - 1] === history[history.length - 2]) {
                history.pop();
            }

            // Mostrar la p치gina objetivo
            if (targetPage === 'menu') {
                pageMenu.style.display = 'flex';
                // Activamos el video de fondo solo en el men칰
                document.body.classList.add('menu-active-video');
                // Al volver al men칰, mostramos la animaci칩n inicial
                animateMenu();
            } else if (targetPage === 'catalog') {
                pageCatalog.style.display = 'block';
                renderCatalog(category);
                fixedBtnBack.style.display = 'block';
            } else if (targetPage === 'details') {
                pageDetails.style.display = 'block';
                renderDetails(category, vehicleId); // AHORA 'category' tiene el valor correcto.
                fixedBtnBack.style.display = 'block';
            }
        }
        
        // --- FUNCI칍N renderCatalog (Permite la navegaci칩n a Detalles) ---
        
        /**
         * Renderiza el cat치logo de veh칤culos para una categor칤a espec칤fica.
         */
        function renderCatalog(category) {
            currentCategory = category;
            mainCategoryTitle.textContent = category;
            
            const vehicles = catalogo[category] || [];
            catalogoVehiculosDiv.innerHTML = vehicles.map(vehiculo => {
                const imageURL = getCatalogImg(vehiculo);
                const whatsappLink = getWhatsappLink(vehiculo.Marca, vehiculo.Modelo);

                return `
                    <div class="car-card" onclick="showPage('details', '${category}', ${vehiculo.id})" data-vehicle-id="${vehiculo.id}">
                        <div class="card-image-container">
                            <img src="${imageURL}" alt="${vehiculo.Marca} ${vehiculo.Modelo}" class="card-image">
                        </div>
                        <div class="card-detail">
                            <p>Marca: <strong>${vehiculo.Marca}</strong></p>
                            <p>Modelo: <strong>${vehiculo.Modelo}</strong></p>
                            
                          

<div class="motor-detail-container">
    ${getMotorSVG()}
    <p class="detail-text-line">
        Motor:&nbsp;<strong>${vehiculo.Motor}</strong>
    </p>
</div>

${category === "Camiones" ? `
<div class="motor-detail-container" style="margin-top: 5px;">
    <svg style="width:16px; height:16px; fill:var(--color-neon-blue); margin-right:8px;" viewBox="0 0 24 24">
        <path d="M3,18V6H21V18H3M3,4A2,2 0 0 0 1,6V18A2,2 0 0 0 3,20H21A2,2 0 0 0 23,18V6A2,2 0 0 0 21,4H3M11,14H13V16H11V14M11,10H13V12H11V10M11,6H13V8H11V6Z" />
    </svg>
    <p class="detail-text-line">
        Carga:&nbsp;<strong>${vehiculo.Carga || 'N/A'}</strong>
    </p>
</div>
` : ''}                            
                            <div class="year-detail-container">
                                ${getYearIconSVG()}
                                <p class="detail-text-line">A침o:&nbsp;<strong>${vehiculo.A침o}</strong></p>
                            </div>
                            
                            <div class="transmission-detail-container">
                                ${getTransmissionIconSVG()}
                                <p class="detail-text-line">Transmisi칩n:&nbsp;<strong>${vehiculo.Transmisi칩n}</strong></p>
                            </div>
                            
                            <div class="mileage-detail-container">
                                ${getSpeedometerSVG()}
                                <p class="detail-text-line">Kilometraje:&nbsp;<strong>${vehiculo.Kilometraje}</strong></p>
                            </div>
                        </div>
                        <div class="card-value">
                            ${vehiculo.Valor}
                        </div>
                        <a href="${whatsappLink}" class="modern-btn-whatsapp" onclick="event.stopPropagation();">
                            <i class="fab fa-whatsapp whatsapp-icon"></i>
                            Whatsapp
                        </a>
                    </div>
                `;
            }).join('');
        }
        
        // --- FIN DE FUNCI칍N renderCatalog ---

        /**
         * Renderiza la p치gina de detalles para un veh칤culo espec칤fico.
         */
        function renderDetails(category, id) {
            // CR칈TICO: 'category' ahora recibe el string correcto, permitiendo buscar el veh칤culo.
            const vehicle = (catalogo[category] || []).find(v => v.id === id);
            
            if (!vehicle) {
                alert('Veh칤culo no encontrado.');
                showPage('menu');
                return;
            }

            document.getElementById('detail-title').textContent = `${vehicle.Marca} ${vehicle.Modelo} (${vehicle.A침o})`;
            document.getElementById('detail-value').textContent = vehicle.Valor;

            const galleryContainer = document.getElementById('gallery-container');
            const images = vehicle.ImagenesGaleria || placeholderGallery(vehicle.Modelo);

            galleryContainer.innerHTML = images.map(url => `
                <img src="${url}" alt="Imagen de ${vehicle.Modelo}" class="gallery-image">
            `).join('');
            
            // Opcional: Implementar la galer칤a completa de detalles (especificaciones) aqu칤 si es necesario
        }


        // --- 3. MANEJO DE EVENTOS Y FUNCIONES DE INICIO ---

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Asignar eventos a los botones de categor칤a
            const categoryButtons = document.querySelectorAll('.feature-button');
            categoryButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const category = e.target.getAttribute('data-category');
                    if (category) {
                        showPage('catalog', category);
                    }
                });
            });

            // 2. Inicializar la aplicaci칩n en la p치gina de men칰
            showPage('menu');
        });
        
        /**
         * Aplica la animaci칩n de entrada al t칤tulo y los botones del men칰.
         */
        function animateMenu() {
            // 1. Mostrar el video de fondo
            document.body.classList.add('menu-active-video');
            
            // 游눠 SOLUCI칍N DEL VIDEO 1: Reiniciar el video al inicio (currentTime = 0)
            if (backgroundVideo) {
                backgroundVideo.currentTime = 0; // REINICIA EL VIDEO CADA VEZ QUE SE ENTRA AL MEN칔
            }

            // 游눠 SOLUCI칍N DEL VIDEO 2: Intentar reproducir expl칤citamente el video
            if (backgroundVideo) {
                // Usamos un peque침o delay para asegurarnos de que el elemento es visible
                // y para darle tiempo al navegador de procesar el estado 'visible'.
                setTimeout(() => {
                    // El m칠todo play() retorna una promesa, por eso usamos .catch()
                    backgroundVideo.play().catch(error => {
                        // console.error("La reproducci칩n autom치tica del video fall칩:", error);
                        // Este error es esperado si el navegador es extremadamente estricto,
                        // pero con 'muted' y 'playsinline' deber칤a funcionar en la mayor칤a.
                    });
                }, 100); 
            }
            
            // 2. Animaci칩n del t칤tulo (Fade-In suave 8s)
            menuTitleWrapper.classList.remove('fade-in-initial-hidden');
            menuTitleWrapper.classList.add('fade-in-visible');
            
            // 3. Animaci칩n de los botones (Staggered Fade-In Scale)
            // Primero, aseguramos la clase inicial para que el CSS aplique el estilo de "oculto"
            categoryButtonsContainer.classList.add('buttons-stagger-hidden');
            
            // Usamos un peque침o delay para que el navegador reconozca el estado inicial
            setTimeout(() => {
                categoryButtonsContainer.classList.remove('buttons-stagger-hidden');
                categoryButtonsContainer.classList.add('buttons-stagger-active');
            }, 10); // Un peque침o retraso para forzar el repintado
            
            // Limpiar la clase de animaci칩n despu칠s de que haya terminado (ej: 1s para el 칰ltimo bot칩n + su duraci칩n)
            setTimeout(() => {
                 categoryButtonsContainer.classList.remove('buttons-stagger-active');
            }, 1000); 
        }

        // --- NAVEGACI칍N POR GESTOS (SWIPE DERECHA PARA REGRESAR) ---
        let touchStartX = 0;
        let isSwiping = false; 
        const SWIPE_THRESHOLD = 50; 
        
        // 1. Registrar el inicio del toque
        document.addEventListener('touchstart', (e) => {
            // Solo registrar el inicio si es un solo toque
            if (e.touches.length === 1) {
                touchStartX = e.touches[0].clientX;
                isSwiping = true;
            }
        }, { passive: true }); // Usar passive: true para no bloquear el scroll

        // 2. Registrar el movimiento y verificar la direcci칩n
        document.addEventListener('touchmove', (e) => {
            if (isSwiping && e.touches.length === 1) {
                const currentX = e.touches[0].clientX;
                
                // C치lculo de la diferencia horizontal y vertical
                const diffX = Math.abs(currentX - touchStartX);
                const diffY = Math.abs(e.touches[0].clientY - e.changedTouches[0].clientY); 

                // Si el movimiento vertical es mucho mayor que el horizontal, deshabilitar el swipe
                if (diffY > diffX * 2 && diffY > 10) {
                    isSwiping = false; 
                }
            }
        }, { passive: false }); 


        // 3. Registrar el final del toque y calcular el gesto
        document.addEventListener('touchend', (e) => {
            if (isSwiping) {
                // e.changedTouches[0] es el dedo que se levant칩
                const touchEndX = e.changedTouches[0].clientX;
                const swipeDistance = touchEndX - touchStartX;
    
                // Verificar si fue un deslizamiento hacia la derecha y si se cumpli칩 el umbral
                if (swipeDistance > SWIPE_THRESHOLD) {
                    // Solo ejecutar si NO estamos en el men칰 principal
                    const menuPage = document.getElementById('page-menu');
                    if (menuPage.style.display === 'none') {
                        // Llamar a la funci칩n de regreso
                        showPage('previous');
                    }
                }
            }
            // Resetear para el siguiente toque
            touchStartX = 0;
            isSwiping = false;
        });

        // --- FIN DE NAVEGACI칍N POR GESTOS ---
    </script>
    </body>
</html>
